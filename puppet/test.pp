# ################################################################################
# ### VARIABLES ##################################################################
# ################################################################################
$apache_path = 'kopya'

# ################################################################################
# ### INIT #######################################################################
# ################################################################################

class {'abes':
  appli_name => 'kopyaFront',
  env        => 'TEST',
  group_id   => 'fr.abes.kopya',
}

# ################################################################################
# ### WEB ########################################################################
# ################################################################################
node /^raiponce(\d)-test/ {
  notify { "Deploy on RAIPONCE ${1} TEST": }

  abes::apache::htaccess { 'htaccess' :
    apache_path_web => $apache_path,
    file_name       => 'htaccess_kopya',
  }

  abes::apache::front { 'appli vue.js' :
    apache_path_web => $apache_path,
    artifact_id     => 'front'
  }
}

# ################################################################################
node default {
  notify { 'Aucun deploiement sur cette machine' : }
}

